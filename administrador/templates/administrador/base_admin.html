<!DOCTYPE html>
{% load static %}
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block titulo %}Administrador - Alcaldía POA{% endblock %}</title>
    <link href="{% static 'css/output.css' %}" rel="stylesheet">
    <link rel="preload" href="{% static 'js/theme-toggle.js' %}" as="script">
</head>
<body class="bg-base-200">
    <!-- Navbar -->
    <div class="navbar bg-congress-blue-700 text-white shadow-lg">
        <div class="flex-1">
            <a href="{% url 'administrador:dashboard' %}" class="btn btn-ghost text-xl">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                Alcaldía POA - Admin
            </a>
        </div>
        <div class="flex-none gap-2">
            <!-- Botón de tema mejorado -->
            <button class="theme-toggle-btn theme-toggle-btn-sm" id="theme-toggle" data-tooltip="Cambiar a tema oscuro" aria-label="Cambiar a tema oscuro" aria-pressed="false" role="switch">
                <!-- Icono del Sol -->
                <svg class="theme-icon theme-icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z"/>
                </svg>
                <!-- Icono de la Luna -->
                <svg class="theme-icon theme-icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z"/>
                </svg>
            </button>
            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </div>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52 text-base-content">
                    <li><a href="{% url 'administrador:dashboard' %}">Dashboard</a></li>
                    <li><a href="{% url 'administrador:lista_unidades' %}">Unidades</a></li>
                    <li><a href="{% url 'login:logout' %}">Cerrar Sesión</a></li>
                </ul>
            </div>
            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar placeholder">
                    <div class="bg-congress-blue-500 text-white rounded-full w-10">
                        <span class="text-xl">{{ request.user.email.0|upper }}</span>
                    </div>
                </div>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52 text-base-content">
                    <li class="menu-title">
                        <span>{{ request.user.email }}</span>
                    </li>
                    <li><a href="{% url 'login:cambiar_clave' %}">Cambiar Contraseña</a></li>
                    <li><a href="{% url 'login:logout' %}">Cerrar Sesión</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Contenido principal -->
    <div class="container mx-auto px-4 py-8">
        <!-- Mensajes -->
        {% if messages %}
            <div class="mb-4 space-y-2">
                {% for message in messages %}
                    <div class="alert {% if message.tags == 'error' %}alert-error{% elif message.tags == 'success' %}alert-success{% elif message.tags == 'warning' %}alert-warning{% else %}alert-info{% endif %}">
                        <span>{{ message }}</span>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        {% block contenido %}{% endblock %}
    </div>

    <script>
        // Función para cerrar alertas automáticamente
        setTimeout(() => {
            document.querySelectorAll('.alert').forEach(alert => {
                alert.style.transition = 'opacity 0.5s';
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 500);
            });
        }, 5000);
    </script>
    <script src="{% static 'js/theme-toggle.js' %}"></script>
</body>
</html>
